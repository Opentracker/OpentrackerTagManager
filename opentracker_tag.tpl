___INFO___

{
  "displayName": "opentracker_tag",
  "description": "opentracker tag will send request to opentracker cluster of servers",
  "securityGroups": [],
  "id": "cvt_temp_public_id",
  "type": "TAG",
  "version": 1,
  "brand": {
    "thumbnail": "data:image/jpeg;base64,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",
    "displayName": "",
    "id": "brand_dummy"
  },
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "notSetText": "this field is required",
    "help": "site registered with opentracker",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "displayName": "site",
    "simpleValueType": true,
    "name": "site",
    "type": "TEXT"
  }
]


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "send_pixel",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://log.opentracker.net/"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// Enter your template code here.
//var log = require('logToConsole');
//log('data =', data);

// Call data.gtmOnSuccess when the tag is finished.
//data.gtmOnSuccess();

// require relevant API
const sendPixel = require('sendPixel');
const encodeUriComponent = require('encodeUriComponent');

// capture values of template fields
const site = data.site;

// use the provided APIs to do things like send pixels
const url = 'https://log.opentracker.net/?site=' + encodeUriComponent(site);
sendPixel(url, data.gtmOnSuccess, data.gtmOnFailure);


___NOTES___

Created on 8/6/2019, 1:34:22 PM
