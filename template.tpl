___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "displayName": "101 Opentracker Growth Tag",
  "description": "Connect the dots with real-time insights and grow your business with this tag. Providing relevant, agile & accurate analytics.",
  "categories": ["ANALYTICS", "CONVERSIONS", "DATA_WAREHOUSING"],
  "securityGroups": [],
  "id": "cvt_temp_public_id",
  "type": "TAG",
  "version": 1,
  "brand": {
    "thumbnail": "data:image/png;base64,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",
    "displayName": "",
    "id": "brand_dummy"
  },
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "notSetText": "This field is required",
    "help": "The site registered at www.opentracker.net. An example would be \"www.example.com\".",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "displayName": "site",
    "simpleValueType": true,
    "name": "site",
    "type": "TEXT"
  }
]


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://script.opentracker.net/*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// Enter your template code here.
//var log = require('logToConsole');
//log('data =', data);

// Call data.gtmOnSuccess when the tag is finished.
//data.gtmOnSuccess();

// require relevant API
//const sendPixel = require('sendPixel');
const encodeUriComponent = require('encodeUriComponent');

// capture values of template fields
//const site = data.site;

// use the provided APIs to do things like send pixels
//const url = 'https://log.opentracker.net/?site=' + encodeUriComponent(site);
//sendPixel(url, data.gtmOnSuccess, data.gtmOnFailure);

var ot_site = data.site;
const injectScript = require('injectScript');
const url = 'https://script.opentracker.net/?site=' + encodeUriComponent(ot_site);
injectScript(url, data.gtmOnSuccess, data.gtmOnFailure, url);


___NOTES___

Created on 10/8/2019, 11:26:59 AM
